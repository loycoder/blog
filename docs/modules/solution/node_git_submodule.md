<h2>基于node的 git submodules自动化实现方案</h2>

<h3>背景：</h3>
通常在团队协作开发中，如果涉及到多个模块，可能会遇到在一个Git仓库 中添加 其他 Git 仓库的场景。比如，在项目中引用第三方库。或者在模块化开发中，某些公共的模块是需要单独维护的，使用单独的仓库比较方便，但是在项目中需要引用，就会出现这样的场景。git submodule 的就是解决这类问题的。

<!-- ## 开发流程 （建议） -->
   公司目前前端saas项目中，基于webpack做的多页面配置打包，多个子模块起初是放在一个Git仓库的，但随着业务线的发展，必然存在以下几个问题：
   * 1. 文件越来越多,业务开发寻址变得越来越困难。
   * 2. 新业务线增加，把文件放入同一仓库管理，导致文件数量增长极快，管理及协同开发难度也在不断加大。
   * 3. 多个业务开发完成线，出现分支合并 master的情况, 增加了工作量
   * 4. 不同业务线间缺少物理隔离，会出现跨业务线文件引用混乱，例如A业务线出现了B业务线名字的组件。

为了要解决这些问题，我们意识到需要拆分这些应用，即进行工程优化的常规手段进行“分治”，其实这也是微前端的雏形。关于微前端可以参考：
[基于Vue的 微前端项目实践方案](/modules/solution/micro),  言归正传，对于物理分离层面，我们采用[git submodule](/modules/git/submodule)实现.

<!-- [_sidebar.css](https://cdn.jsdelivr.net/npm/docsify-themeable@0/src/scss/themes/defaults/_sidebar.css ':include') -->




<h3>针对上面的问题，我们要实现的功能主要有：</h3>

 * 1. 按需拉取指定的子模块（当然也可以全部拉取）
 * 2. 子模块的维护者提交了更新后，我们通过执行简单脚本,实现批量拉取更新，替代繁琐的git命令
 * 3. 当调试子模块，git pull时，同时暂存本地代码
 * 4. 子模块不需要时，可以批量移出
 * 5. 限制子模块push（即拉取的子模块只拥有读的权限）
 





