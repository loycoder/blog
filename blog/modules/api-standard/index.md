
## API版本控制 （建议）

* API的版本号统一放入URL。
* https://api.example.com/v{n}/
* v{n}n代表版本号，分为整形和浮点型
* 整形版本号：大功能版本发布形式；具有当前版本状态下的所有API接口，例如：v1,v2
* 浮点型：为小版本号，只具备补充api的功能，其他api都默认调用大版本号的API，例如v1.1,v1.2



## 开发流程 （建议）

  * 后端编写和维护接口文档，在 API 变化时更新接口文档

  * 后端根据接口文档进行接口开发

  * 前端根据接口文档进行开发 + Mock平台

  * 开发完成后联调和提交测试

  * Mock 服务器根据接口文档自动生成 Mock 数据，实现接口文档即API




## 响应格式

```js
{
	"code": 0,
	"msg": "操作成功",
	"data": {
		"name": "XXX",
		"code": "XXX"
	}
}
```



## 系统状态码

| code值 | 返回描述 | 备注说明 |
| :-----| :---- | :----: |
| 200 | 视业务情况而定，默认为：操作成功 | - |
| 400 | 请求错误 | - |
| 401 | 无权访问该资源 | - |
| 403 | 拒绝访问 | - |
| 404 | 请求资源不存在 | - |
| 408 | 请求超时 | - |
| 500 | 服务器错误 | - |
| 501 | 服务未实现 | - |
| 502 | 网络错误 | - |
| 503 | 服务不可用 | - |
| 504 | 网络超时 | - |
| 505 | HTTP版本不受支持 | - |
| 660 | token已过期请重新获取 | - |
| 662 | 非法token | - |
| 1013 | 验证码有误或已过期，请重新获取验证码 | - |



## 业务状态码


| 编码        | 描述                                                         | 备注 |
| ----------- | ------------------------------------------------------------ | ---- |
| 0           | 操作成功                                                     |      |
| -1          | 操作失败                                                     |      |
| 500         | 内部异常                                                     |      |
| -2          | 操作失败,传入非法参数                                        |      |
| 1000        | 请求参数错误                                                 |      |
| 1001        | 请求不支持GET，请使用POST                                    |      |
| 1002        | 请求不支持POST，请使用GET                                    |      |
| 8888        | 参数类型转换错误                                             |      |
| 9999        | 接口请求异常                                                 |      |
| 10204001    | 请求方法错误                                                 |      |
| 10204002    | 缺少请求参数错误                                             |      |
| 10204003    | SQL异常                                                      |      |
| 10204004    | 系统忙，请稍后再试或联系管理员                               |      |
| 30204001    | 工作台最多支持添加11个功能，如需继续添加，请先移出不常用的功能 |      |
| 30204002    | 请至少保留一个快捷功能                                       |      |
| 20204001    | 参数输入不合法                                               |      |
| 5001        | 该标题已经存在                                               |      |
| 5002        | 请选择需要操作的记录                                         |      |
| 5003        | 接口参数不能为空                                             |      |
| 5004        | 群发消息标题不能为空                                         |      |
| 5005        | 群发消息内容不能为空                                         |      |
| 5006        | 群发消息链接不能为空                                         |      |
| 5007        | 数据库保存失败，请重试"                                      |      |
| 5008        | 参数异常                                                     |      |
| 5009        | 该服务名称已经存在                                           |      |
| 5010        | 该服务已不能移动                                             |      |
| 5011        | 数据库异常                                                   |      |
| 5012        | 字符长度不能为空，且要在50个字符以内                         |      |
| 5013        | 字符长度不能为空，且要在100个字符以内！                      |      |
| 5014        | 字符长度不能为空，且要在200个字符以内！                      |      |
| 5015        | 字符长度不能为空，且要在20个字符以内！                       |      |
| 5016        | 内容不能为空                                                 |      |
| 5017        | 记录不存在                                                   |      |
| 5018        | 记录状态错误                                                 |      |
| 5019        | 记录不是帮助分类                                             |      |
| 80001       | 用户信息参数不能为空                                         |      |
| 20200060001 | 参数输入不合法！                                             |      |
| 10200060002 | 内部异常！                                                   |      |
| 20200060002 | %s不存在,删除失败                                            |      |
| 20200060003 | 链接格式有误, 需以http或https开始                            |      |
| 10050001    | 消息的消费队列不能为空                                       |      |
| 10050002    | 数据库中消息数据保存失败,messageId=%s                        |      |
| 10050003    | 数据库中消息数据删除失败,messageId=%s                        |      |
| 10050005    | 目标接口参数不能为空                                         |      |
| 10050006    | 根据消息id查找的消息为空,messageId=%s                        |      |
| 10050007    | 消息数据不能为空                                             |      |
| 10050008    | 消息体不能为空,messageId=%s                                  |      |
| 10050009    | 消息ID不能为空                                               |      |
| 10050010    | 参数异常                                                     |      |
| 10050011    | 注解使用错误，方法[%s]的第一个参数必须为FuliMqMessage类型    |      |
| 10050004    | 消息中心接口异常,message=%s, messageId=%s                    |      |
| 99990002    | 微服务不在线,或者网络超时                                    |      |
| 10113006    | 系统忙，请稍后再试或联系管理员                               |      |
| 1003        | 用户名不能为空                                               |      |
| 1004        | 密码不能为空！                                               |      |
| 1005        | 密码有误！                                                   |      |
| 1006        | 验证码不能为空！                                             |      |
| 1007        | 验证码有误！                                                 |      |
| 1008        | 用户不存在！                                                 |      |
| 1009        | 用户已存在！                                                 |      |
| 1010        | 获取token失败！                                              |      |
| 1011        | 无效token！                                                  |      |
| 1015        | 手机号码不能为空！                                           |      |
| 1012        | 两次输入的密码不一致！                                       |      |
| 1013        | 请重新发送验证码！                                           |      |
| 1014        | 验证码不能为空！                                             |      |
| 1016        | 授权出错！                                                   |      |
| 1017        | 用户未绑定                                                   |      |
| 401         | 无权限                                                       |      |







##数据格式规范



## 列表

```js
//  data.list: 响应返回的列表数据
{
    "code": 0,
    "msg": "操作成功",
    "data": {
       list:[]
    }
}

```


## 分页

### 请求参数

| 参数名称 | 参数说明       | 类型   | 默认值 | 备注 | 
| -------- | -------------- | ------ | ------ |  |
| pageNo   | 当前页数       | Number | 1      | 统一|
| pageSize | 每页显示的条数 | Number | 10     |  统一|
| ...      | 其他           | -      | -      ||



### 响应参数

| 参数名称     | 参数说明       | 类型   |
| ------------ | -------------- | ------ |
| total        | 总条数         | Number |
| totalPage    | 总页数         | Number |
| currentPage  | 当前页数       | Number |
| pageSize     | 每页显示的条数 | Number |
| tableHeaders | 自定义表头信息 | Array  |
| records      | 数据列表       | Array  |

#### tableHeaders

| 参数名称 | 参数说明 | 类型   |
| -------- | -------- | ------ |
| field    | 字段名   | String |
| title    | 标题名称 | String |

### 返回示例

```js
// 部分接口 存在包裹 pageResult的情况，建议去除，统一采用以下格式：
{
  "code": 0,
  "msg": "操作成功",
  "data": {
    "currentPage": 2,
    "totalPage": 3,
    "total": 22
    "pageNo": 1,
    "pageSize": 10,
    "tableHeaders": [
      {
        "field": "code",
        "title": "部门编码"
      }
    ],
    "records": [
      {
        "id": 1,
        "name": "XXX",
        "code": "H001"
      },
      {
        "id": 2,
        "name": "XXX",
        "code": "H001"
      }
    ]
  }
}
```


## 下拉列表&nbsp;复选框&nbsp;单选框

```js
  数据由后端接口统一逻辑判定是否选中，通过isSelect标示是否选中，示例如下
{
    "code": 0,
    "msg": "success",
    "data": {
       list:[{
        "id": 1,
        "name": "xxx",
        "isSelect": 1
      },
      {
        "id": 2,
        "name": "xxx",
        "isSelect": 0
      }]
    }
}
```



## 树形结构

```js
[{
		"label": "一级 1",
		"children": [{
			"label": "二级 1-1",
			"children": [{
				"label": "三级 1-1-1"
			}]
		}]
	},
	{
		"label": "一级 2",
		"children": [{
				"label": "二级 2-1",
				"children": [{
					"label": "三级 2-1-1"
				}]
			},
			{
				"label": "二级 2-2",
				"children": [{
					"label": "三级 2-2-1"
				}]
			}
		]
	}
]
```



## 表格导出

- 返回文件Url
- 返回二制制文件流



## 特殊内容规范

  ### Boolean类型
```javascript
   关于Boolean类型，JSON数据传输中一律使用1/0来标示，1为是/True，0为否/False
```
  ### 日期格式

```
视业务情况而定（yyyy-mm-dd、时间戳） 
```

  ### 货币金额



   ```javascript
    关于货币格式化，JSON数据传输中一律使用浮点数类型（后端不需要做格式转换）
    前端统一处理，保留位数根据业务而定，如下所示：
    
    {
      "price": 10.320
    } 
   ```

  ### 状态字段
   ```javascript
    对于状态字段， 以status结尾,统一返回 label/value 字段， 如下所示
    {
      "payStatus": {
         "label":" 支付成功",
         "value": 200
      }
    }
      
   ```

   ### 数据为空约束
   ```javascript
    当某字段无状态，应明确默认值， 如下所示
    {
      "list": []  // 列表无数据，默认返回空数组
    }
      
   ```


  ### 时间范围参数

  > 当前不同业务线存在时间参数 不统一的情况

   ```javascript
     对于时间范围参数， key 名称可自定义， 但必须统一为2个参数，分别对应 开始和结束时间，。如下所示：
    {
         "startTime": "",
         "endTime": ""
    }
   ```











